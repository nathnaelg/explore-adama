{
    "openapi": "3.0.0",
    "info": {
        "title": "Adama Tourism Backend API",
        "version": "1.0.0",
        "description": "Comprehensive API documentation for the Adama Tourism Backend Application."
    },
    "servers": [
        {
            "url": "http://localhost:3000/api",
            "description": "Local Development Server"
        }
    ],
    "components": {
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT"
            },
            "apiKeyAuth": {
                "type": "apiKey",
                "in": "header",
                "name": "x-api-key"
            }
        },
        "schemas": {
            "User": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "email": {
                        "type": "string",
                        "format": "email"
                    },
                    "role": {
                        "type": "string",
                        "enum": [
                            "ADMIN",
                            "TOURIST",
                            "RESIDENT"
                        ]
                    },
                    "profile": {
                        "$ref": "#/components/schemas/Profile"
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "Profile": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "gender": {
                        "type": "string"
                    },
                    "phone": {
                        "type": "string"
                    },
                    "country": {
                        "type": "string"
                    },
                    "avatar": {
                        "type": "string"
                    },
                    "locale": {
                        "type": "string"
                    }
                }
            },
            "AuthResponse": {
                "type": "object",
                "properties": {
                    "user": {
                        "type": "object",
                        "properties": {
                            "id": {
                                "type": "string"
                            },
                            "email": {
                                "type": "string"
                            },
                            "role": {
                                "type": "string"
                            }
                        }
                    },
                    "accessToken": {
                        "type": "string"
                    }
                }
            },
            "RegisterDto": {
                "type": "object",
                "required": [
                    "email",
                    "password",
                    "name"
                ],
                "properties": {
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "tourist@example.com"
                    },
                    "password": {
                        "type": "string",
                        "minLength": 6,
                        "example": "password123"
                    },
                    "name": {
                        "type": "string",
                        "example": "John Doe"
                    },
                    "role": {
                        "type": "string",
                        "enum": [
                            "TOURIST",
                            "RESIDENT"
                        ],
                        "default": "TOURIST"
                    }
                }
            },
            "LoginDto": {
                "type": "object",
                "required": [
                    "email",
                    "password"
                ],
                "properties": {
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "tourist@example.com"
                    },
                    "password": {
                        "type": "string",
                        "example": "password123"
                    }
                }
            },
            "Place": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "categoryId": {
                        "type": "string"
                    },
                    "latitude": {
                        "type": "number"
                    },
                    "longitude": {
                        "type": "number"
                    },
                    "address": {
                        "type": "string"
                    },
                    "viewCount": {
                        "type": "integer"
                    },
                    "bookingCount": {
                        "type": "integer"
                    },
                    "avgRating": {
                        "type": "number"
                    },
                    "images": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Media"
                        }
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "CreatePlaceDto": {
                "type": "object",
                "required": [
                    "name",
                    "latitude",
                    "longitude"
                ],
                "properties": {
                    "name": {
                        "type": "string",
                        "example": "Adama Park"
                    },
                    "description": {
                        "type": "string",
                        "example": "A beautiful park."
                    },
                    "categoryId": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "latitude": {
                        "type": "number",
                        "example": 8.54
                    },
                    "longitude": {
                        "type": "number",
                        "example": 39.27
                    },
                    "address": {
                        "type": "string",
                        "example": "Adama, Ethiopia"
                    }
                }
            },
            "Event": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "title": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "placeId": {
                        "type": "string"
                    },
                    "categoryId": {
                        "type": "string"
                    },
                    "date": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "startTime": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "endTime": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "capacity": {
                        "type": "integer"
                    },
                    "price": {
                        "type": "number"
                    },
                    "images": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Media"
                        }
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "CreateEventDto": {
                "type": "object",
                "required": [
                    "title",
                    "date"
                ],
                "properties": {
                    "title": {
                        "type": "string",
                        "example": "Cultural Festival"
                    },
                    "description": {
                        "type": "string",
                        "example": "Annual cultural festival."
                    },
                    "placeId": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "categoryId": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "date": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-01T10:00:00Z"
                    },
                    "startTime": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "endTime": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "capacity": {
                        "type": "integer",
                        "example": 500
                    },
                    "price": {
                        "type": "number",
                        "example": 200.00
                    }
                }
            },
            "Media": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "url": {
                        "type": "string"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "IMAGE",
                            "VIDEO"
                        ]
                    },
                    "caption": {
                        "type": "string"
                    }
                }
            },
            "BlogMedia": {
                "type": "object",
                "properties": {
                    "id": { "type": "string" },
                    "postId": { "type": "string" },
                    "url": { "type": "string" },
                    "type": { "type": "string", "enum": ["IMAGE", "VIDEO"] },
                    "caption": { "type": "string" }
                }
            },
            "BlogComment": {
                "type": "object",
                "properties": {
                    "id": { "type": "string" },
                    "postId": { "type": "string" },
                    "userId": { "type": "string" },
                    "content": { "type": "string" },
                    "createdAt": { "type": "string", "format": "date-time" },
                    "user": {
                        "type": "object",
                        "properties": {
                            "id": { "type": "string" },
                            "email": { "type": "string" },
                            "profile": { "$ref": "#/components/schemas/Profile" }
                        }
                    }
                }
            },
            "BlogPost": {
                "type": "object",
                "properties": {
                    "id": { "type": "string" },
                    "authorId": { "type": "string" },
                    "title": { "type": "string" },
                    "body": { "type": "string" },
                    "category": { "type": "string" },
                    "tags": { "type": "array", "items": { "type": "string" } },
                    "status": { "type": "string", "enum": ["PENDING", "APPROVED", "REJECTED"] },
                    "createdAt": { "type": "string", "format": "date-time" },
                    "updatedAt": { "type": "string", "format": "date-time" },
                    "author": {
                        "type": "object",
                        "properties": {
                            "id": { "type": "string" },
                            "email": { "type": "string" },
                            "profile": { "$ref": "#/components/schemas/Profile" }
                        }
                    },
                    "media": {
                        "type": "array",
                        "items": { "$ref": "#/components/schemas/BlogMedia" }
                    },
                    "comments": {
                        "type": "array",
                        "items": { "$ref": "#/components/schemas/BlogComment" }
                    }
                }
            },
            "CreateBlogPostDto": {
                "type": "object",
                "required": ["title", "body"],
                "properties": {
                    "title": { "type": "string", "example": "Top 5 places to visit" },
                    "body": { "type": "string", "example": "Full markdown or HTML content." },
                    "category": { "type": "string", "example": "travel" },
                    "tags": { "type": "array", "items": { "type": "string" }, "example": ["adama", "family"] }
                }
            },
            "UpdateBlogPostDto": {
                "type": "object",
                "properties": {
                    "title": { "type": "string" },
                    "body": { "type": "string" },
                    "category": { "type": "string" },
                    "tags": { "type": "array", "items": { "type": "string" } },
                    "status": { "type": "string", "enum": ["PENDING", "APPROVED", "REJECTED"] }
                }
            },
            "CreateBlogCommentDto": {
                "type": "object",
                "required": ["content"],
                "properties": {
                    "content": { "type": "string", "example": "Great post!" }
                }
            },
            "ModerateBlogPostDto": {
                "type": "object",
                "required": ["action"],
                "properties": {
                    "action": { "type": "string", "enum": ["APPROVE", "REJECT", "PENDING"] },
                    "reason": { "type": "string", "example": "Inappropriate content" }
                }
            },
            "BlogListResponse": {
                "type": "object",
                "properties": {
                    "items": {
                        "type": "array",
                        "items": { "$ref": "#/components/schemas/BlogPost" }
                    },
                    "page": { "type": "integer" },
                    "limit": { "type": "integer" },
                    "total": { "type": "integer" }
                }
            },
            "Review": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "rating": {
                        "type": "integer"
                    },
                    "comment": {
                        "type": "string"
                    },
                    "userId": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "CreateReviewDto": {
                "type": "object",
                "required": [
                    "itemType",
                    "itemId",
                    "rating"
                ],
                "properties": {
                    "itemType": {
                        "type": "string",
                        "enum": [
                            "PLACE",
                            "EVENT"
                        ]
                    },
                    "itemId": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "rating": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 5
                    },
                    "comment": {
                        "type": "string"
                    }
                }
            },
            "Booking": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "userId": {
                        "type": "string"
                    },
                    "eventId": {
                        "type": "string"
                    },
                    "quantity": {
                        "type": "integer"
                    },
                    "total": {
                        "type": "number"
                    },
                    "status": {
                        "type": "string"
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "InitiateBookingDto": {
                "type": "object",
                "required": [
                    "eventId",
                    "quantity"
                ],
                "properties": {
                    "eventId": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "quantity": {
                        "type": "integer",
                        "minimum": 1
                    }
                }
            },
            "BookingResponse": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string"
                    },
                    "booking": {
                        "$ref": "#/components/schemas/Booking"
                    },
                    "checkoutUrl": {
                        "type": "string"
                    }
                }
            },
            "Ticket": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "qrToken": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "eventId": {
                        "type": "string"
                    }
                }
            },
            "Category": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "key": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    }
                }
            },
            "CreateCategoryDto": {
                "type": "object",
                "required": [
                    "key",
                    "name"
                ],
                "properties": {
                    "key": {
                        "type": "string",
                        "example": "hotel"
                    },
                    "name": {
                        "type": "string",
                        "example": "Hotel"
                    }
                }
            },
            "Favorite": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "itemId": {
                        "type": "string"
                    },
                    "itemType": {
                        "type": "string"
                    }
                }
            },
            "AddFavoriteDto": {
                "type": "object",
                "required": [
                    "itemId",
                    "itemType"
                ],
                "properties": {
                    "itemId": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "itemType": {
                        "type": "string",
                        "enum": [
                            "PLACE",
                            "EVENT"
                        ]
                    }
                }
            },
            "Interaction": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "type": {
                        "type": "string"
                    },
                    "itemId": {
                        "type": "string"
                    }
                }
            },
            "RecordInteractionDto": {
                "type": "object",
                "required": [
                    "itemId",
                    "itemType",
                    "type"
                ],
                "properties": {
                    "itemId": {
                        "type": "string"
                    },
                    "itemType": {
                        "type": "string"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "VIEW",
                            "CLICK",
                            "SAVE",
                            "BOOK",
                            "REVIEW",
                            "SHARE"
                        ]
                    },
                    "context": {
                        "type": "object"
                    }
                }
            },
            "ChatSession": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "title": {
                        "type": "string"
                    },
                    "messages": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/ChatMessage"
                        }
                    }
                }
            },
            "ChatMessage": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "role": {
                        "type": "string",
                        "enum": [
                            "USER",
                            "ASSISTANT",
                            "SYSTEM"
                        ]
                    },
                    "content": {
                        "type": "string"
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "SendMessageDto": {
                "type": "object",
                "required": [
                    "message"
                ],
                "properties": {
                    "sessionId": {
                        "type": "string"
                    },
                    "message": {
                        "type": "string"
                    },
                    "meta": {
                        "type": "object"
                    }
                }
            },
            "InitPaymentDto": {
                "type": "object",
                "required": [
                    "userId",
                    "bookingId",
                    "amount"
                ],
                "properties": {
                    "userId": {
                        "type": "string"
                    },
                    "bookingId": {
                        "type": "string"
                    },
                    "amount": {
                        "type": "number"
                    },
                    "currency": {
                        "type": "string",
                        "default": "ETB"
                    },
                    "description": {
                        "type": "string"
                    },
                    "returnUrl": {
                        "type": "string"
                    }
                }
            }
        }
    },
    "paths": {
        "/auth/register": {
            "post": {
                "summary": "Register a new user",
                "tags": [
                    "Auth"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/RegisterDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "User registered",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AuthResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request"
                    }
                }
            }
        },
        "/auth/login": {
            "post": {
                "summary": "Login user",
                "tags": [
                    "Auth"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/LoginDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Login successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AuthResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Invalid credentials"
                    }
                }
            }
        },
        "/auth/refresh": {
            "post": {
                "summary": "Refresh access token",
                "tags": [
                    "Auth"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "refreshToken": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Token refreshed",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AuthResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/auth/logout": {
            "post": {
                "summary": "Logout user",
                "tags": [
                    "Auth"
                ],
                "responses": {
                    "204": {
                        "description": "Logged out"
                    }
                }
            }
        },
        "/auth/revoke-all": {
            "post": {
                "summary": "Revoke all sessions",
                "tags": [
                    "Auth"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "All sessions revoked"
                    }
                }
            }
        },
        "/users": {
            "get": {
                "summary": "List users (Admin)",
                "tags": [
                    "Users"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "default": 1
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "default": 25
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of users",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/User"
                                            }
                                        },
                                        "total": {
                                            "type": "integer"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/users/{id}": {
            "get": {
                "summary": "Get user by ID",
                "tags": [
                    "Users"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/User"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "summary": "Update user (Admin)",
                "tags": [
                    "Users"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "email": {
                                        "type": "string"
                                    },
                                    "role": {
                                        "type": "string"
                                    },
                                    "banned": {
                                        "type": "boolean"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "User updated"
                    }
                }
            },
            "delete": {
                "summary": "Delete user",
                "tags": [
                    "Users"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User deleted"
                    }
                }
            }
        },
        "/users/profile": {
            "put": {
                "summary": "Update own profile",
                "tags": [
                    "Users"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Profile"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Profile updated"
                    }
                }
            }
        },
        "/users/profile/avatar": {
            "post": {
                "summary": "Upload avatar",
                "tags": [
                    "Users"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "avatar": {
                                        "type": "string",
                                        "format": "binary"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Avatar updated"
                    }
                }
            }
        },
        "/users/change-password": {
            "put": {
                "summary": "Change password",
                "tags": [
                    "Users"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "oldPassword",
                                    "newPassword"
                                ],
                                "properties": {
                                    "oldPassword": {
                                        "type": "string"
                                    },
                                    "newPassword": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Password changed"
                    }
                }
            }
        },
        "/places": {
            "get": {
                "summary": "List places",
                "tags": [
                    "Places"
                ],
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "q",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "categoryId",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "sort",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of places",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Place"
                                            }
                                        },
                                        "total": {
                                            "type": "integer"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "summary": "Create place (Admin)",
                "tags": [
                    "Places"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreatePlaceDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Place created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Place"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/places/{id}": {
            "get": {
                "summary": "Get place by ID",
                "tags": [
                    "Places"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Place details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Place"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "summary": "Update place (Admin)",
                "tags": [
                    "Places"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreatePlaceDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Place updated"
                    }
                }
            },
            "delete": {
                "summary": "Delete place (Admin)",
                "tags": [
                    "Places"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Place deleted"
                    }
                }
            }
        },
        "/places/nearby": {
            "get": {
                "summary": "Get nearby places",
                "tags": [
                    "Places"
                ],
                "parameters": [
                    {
                        "name": "lat",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "number"
                        }
                    },
                    {
                        "name": "lng",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "number"
                        }
                    },
                    {
                        "name": "radius",
                        "in": "query",
                        "schema": {
                            "type": "number",
                            "default": 10
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Nearby places",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Place"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/places/{id}/images": {
            "post": {
                "summary": "Upload place image (Admin)",
                "tags": [
                    "Places"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "file": {
                                        "type": "string",
                                        "format": "binary"
                                    },
                                    "caption": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Image uploaded"
                    }
                }
            }
        },
        "/events": {
            "get": {
                "summary": "List events",
                "tags": [
                    "Events"
                ],
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "q",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "categoryId",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "dateFrom",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "dateTo",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of events",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Event"
                                            }
                                        },
                                        "total": {
                                            "type": "integer"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "summary": "Create event (Admin)",
                "tags": [
                    "Events"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateEventDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Event created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Event"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/events/{id}": {
            "get": {
                "summary": "Get event by ID",
                "tags": [
                    "Events"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Event details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Event"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "summary": "Update event (Admin)",
                "tags": [
                    "Events"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateEventDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Event updated"
                    }
                }
            },
            "delete": {
                "summary": "Delete event (Admin)",
                "tags": [
                    "Events"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Event deleted"
                    }
                }
            }
        },
        "/events/nearby": {
            "get": {
                "summary": "Get nearby events",
                "tags": [
                    "Events"
                ],
                "parameters": [
                    {
                        "name": "lat",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "number"
                        }
                    },
                    {
                        "name": "lng",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "number"
                        }
                    },
                    {
                        "name": "radius",
                        "in": "query",
                        "schema": {
                            "type": "number",
                            "default": 10
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Nearby events",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Event"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/events/{id}/images": {
            "post": {
                "summary": "Upload event images (Admin)",
                "tags": [
                    "Events"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "images": {
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "format": "binary"
                                        }
                                    },
                                    "caption": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Images uploaded"
                    }
                }
            }
        },
        "/reviews": {
            "get": {
                "summary": "List reviews",
                "tags": [
                    "Reviews"
                ],
                "parameters": [
                    {
                        "name": "itemType",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "PLACE",
                                "EVENT"
                            ]
                        }
                    },
                    {
                        "name": "itemId",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of reviews",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Review"
                                            }
                                        },
                                        "total": {
                                            "type": "integer"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "summary": "Create review",
                "tags": [
                    "Reviews"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateReviewDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Review created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Review"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/reviews/{id}": {
            "get": {
                "summary": "Get review by ID",
                "tags": [
                    "Reviews"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Review details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Review"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "summary": "Update review",
                "tags": [
                    "Reviews"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "rating": {
                                        "type": "integer"
                                    },
                                    "comment": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Review updated"
                    }
                }
            },
            "delete": {
                "summary": "Delete review",
                "tags": [
                    "Reviews"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Review deleted"
                    }
                }
            }
        },
        "/reviews/admin/{id}/moderate": {
            "post": {
                "summary": "Moderate review (Admin)",
                "tags": [
                    "Reviews"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "action"
                                ],
                                "properties": {
                                    "action": {
                                        "type": "string",
                                        "enum": [
                                            "APPROVE",
                                            "REJECT",
                                            "HIDE"
                                        ]
                                    },
                                    "reason": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Review moderated"
                    }
                }
            }
        },
        "/bookings/initiate": {
            "post": {
                "summary": "Initiate booking",
                "tags": [
                    "Bookings"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/InitiateBookingDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Booking initiated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BookingResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/bookings/{id}": {
            "get": {
                "summary": "Get booking by ID",
                "tags": [
                    "Bookings"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Booking details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Booking"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/bookings/{id}/cancel": {
            "post": {
                "summary": "Cancel booking",
                "tags": [
                    "Bookings"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Booking cancelled"
                    }
                }
            }
        },
        "/tickets/{id}": {
            "get": {
                "summary": "Get ticket by ID",
                "tags": [
                    "Tickets"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Ticket details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Ticket"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/tickets/{id}/qr": {
            "get": {
                "summary": "Get ticket QR code",
                "tags": [
                    "Tickets"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "QR Code Image",
                        "content": {
                            "image/png": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/tickets/validate": {
            "post": {
                "summary": "Validate ticket",
                "tags": [
                    "Tickets"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "qrToken"
                                ],
                                "properties": {
                                    "qrToken": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Ticket valid"
                    }
                }
            }
        },
        "/categories": {
            "get": {
                "summary": "List categories",
                "tags": [
                    "Categories"
                ],
                "responses": {
                    "200": {
                        "description": "List of categories",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Category"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "summary": "Create category (Admin)",
                "tags": [
                    "Categories"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateCategoryDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Category created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Category"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/categories/{id}": {
            "get": {
                "summary": "Get category by ID",
                "tags": [
                    "Categories"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Category details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Category"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "summary": "Update category (Admin)",
                "tags": [
                    "Categories"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateCategoryDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Category updated"
                    }
                }
            },
            "delete": {
                "summary": "Delete category (Admin)",
                "tags": [
                    "Categories"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Category deleted"
                    }
                }
            }
        },
        "/categories/attach": {
            "post": {
                "summary": "Attach place to category (Admin)",
                "tags": [
                    "Categories"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "placeId",
                                    "categoryId"
                                ],
                                "properties": {
                                    "placeId": {
                                        "type": "string"
                                    },
                                    "categoryId": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Attached"
                    }
                }
            }
        },
        "/favorites": {
            "get": {
                "summary": "List favorites",
                "tags": [
                    "Favorites"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of favorites",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Favorite"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "summary": "Add favorite",
                "tags": [
                    "Favorites"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AddFavoriteDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Favorite added"
                    }
                }
            },
            "delete": {
                "summary": "Remove favorite",
                "tags": [
                    "Favorites"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AddFavoriteDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Favorite removed"
                    }
                }
            }
        },
        "/favorites/check": {
            "get": {
                "summary": "Check if favorited",
                "tags": [
                    "Favorites"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "itemId",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "itemType",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Check result",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "boolean"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/interactions": {
            "get": {
                "summary": "List interactions",
                "tags": [
                    "Interactions"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of interactions",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Interaction"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "summary": "Record interaction",
                "tags": [
                    "Interactions"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/RecordInteractionDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Interaction recorded"
                    }
                }
            }
        },
        "/chat/message": {
            "post": {
                "summary": "Send chat message",
                "tags": [
                    "Chat"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/SendMessageDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Message sent",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "response": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/chat/session": {
            "post": {
                "summary": "Create chat session",
                "tags": [
                    "Chat"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "title": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Session created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ChatSession"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/chat/session/{id}": {
            "get": {
                "summary": "Get chat session",
                "tags": [
                    "Chat"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Chat session",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ChatSession"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/chat/sessions": {
            "get": {
                "summary": "List chat sessions",
                "tags": [
                    "Chat"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of sessions",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "sessions": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/ChatSession"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/recommendations/global": {
            "get": {
                "summary": "Get global recommendations",
                "tags": [
                    "Recommendations"
                ],
                "responses": {
                    "200": {
                        "description": "Recommendations",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "popularEvents": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Event"
                                            }
                                        },
                                        "popularPlaces": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Place"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/upload": {
            "post": {
                "summary": "Upload file",
                "tags": [
                    "Upload"
                ],
                "requestBody": {
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "file": {
                                        "type": "string",
                                        "format": "binary"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "File uploaded",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "url": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/payments/webhook": {
            "post": {
                "summary": "Payment webhook",
                "tags": [
                    "Payments"
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                }
            }
        },
        "/payments/init": {
            "post": {
                "summary": "Initialize payment",
                "tags": [
                    "Payments"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/InitPaymentDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Payment initialized"
                    }
                }
            }
        },
        "/payments/verify/{ref}": {
            "get": {
                "summary": "Verify payment",
                "tags": [
                    "Payments"
                ],
                "parameters": [
                    {
                        "name": "ref",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Payment verified"
                    }
                }
            }
        },
        "/payments/return": {
            "get": {
                "summary": "Payment return callback",
                "tags": [
                    "Payments"
                ],
                "parameters": [
                    {
                        "name": "trx_ref",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "ref_id",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "302": {
                        "description": "Redirect"
                    }
                }
            }
        },
        "/ml/items": {
            "get": {
                "summary": "Export items for ML",
                "tags": [
                    "ML"
                ],
                "security": [
                    {
                        "apiKeyAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "pageSize",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Items list"
                    }
                }
            }
        },
        "/ml/interactions": {
            "get": {
                "summary": "Export interactions for ML",
                "tags": [
                    "ML"
                ],
                "security": [
                    {
                        "apiKeyAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "pageSize",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Interactions list"
                    }
                }
            }
        },
        "/ml/users": {
            "get": {
                "summary": "Export users for ML",
                "tags": [
                    "ML"
                ],
                "security": [
                    {
                        "apiKeyAuth": []
                    }
                ],
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "pageSize",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Users list"
                    }
                }
            }
        },
        "/blog": {
            "post": {
                "summary": "Create blog post",
                "tags": ["Blog"],
                "security": [{ "bearerAuth": [] }],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": { "$ref": "#/components/schemas/CreateBlogPostDto" }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Post created",
                        "content": {
                            "application/json": { "schema": { "$ref": "#/components/schemas/BlogPost" } }
                        }
                    }
                }
            },
            "get": {
                "summary": "List blog posts",
                "tags": ["Blog"],
                "parameters": [
                    { "name": "q", "in": "query", "schema": { "type": "string" }, "description": "Search by title/body/tag" },
                    { "name": "page", "in": "query", "schema": { "type": "integer", "default": 1 } },
                    { "name": "limit", "in": "query", "schema": { "type": "integer", "default": 20 } }
                ],
                "responses": {
                    "200": {
                        "description": "List of posts",
                        "content": {
                            "application/json": { "schema": { "$ref": "#/components/schemas/BlogListResponse" } }
                        }
                    }
                }
            }
        },
        "/blog/{id}": {
            "get": {
                "summary": "Get blog post",
                "tags": ["Blog"],
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
                ],
                "responses": {
                    "200": {
                        "description": "Blog post",
                        "content": {
                            "application/json": { "schema": { "$ref": "#/components/schemas/BlogPost" } }
                        }
                    },
                    "404": { "description": "Not found" }
                }
            },
            "patch": {
                "summary": "Update blog post (author or admin)",
                "tags": ["Blog"],
                "security": [{ "bearerAuth": [] }],
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": { "$ref": "#/components/schemas/UpdateBlogPostDto" }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Updated post",
                        "content": {
                            "application/json": { "schema": { "$ref": "#/components/schemas/BlogPost" } }
                        }
                    },
                    "403": { "description": "Forbidden" },
                    "404": { "description": "Not found" }
                }
            },
            "delete": {
                "summary": "Delete blog post (admin)",
                "tags": ["Blog"],
                "security": [{ "bearerAuth": [] }],
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
                ],
                "responses": {
                    "204": { "description": "Deleted" },
                    "403": { "description": "Forbidden" },
                    "404": { "description": "Not found" }
                }
            }
        },
        "/blog/{id}/media": {
            "post": {
                "summary": "Upload media to blog post (admin)",
                "tags": ["Blog"],
                "security": [{ "bearerAuth": [] }],
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "file": { "type": "string", "format": "binary" }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Media uploaded",
                        "content": {
                            "application/json": { "schema": { "$ref": "#/components/schemas/BlogMedia" } }
                        }
                    }
                }
            }
        },
        "/blog/{id}/comments": {
            "post": {
                "summary": "Add comment to blog post",
                "tags": ["Blog"],
                "security": [{ "bearerAuth": [] }],
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": { "$ref": "#/components/schemas/CreateBlogCommentDto" }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Comment created",
                        "content": {
                            "application/json": { "schema": { "$ref": "#/components/schemas/BlogComment" } }
                        }
                    }
                }
            },
            "get": {
                "summary": "List comments for blog post",
                "tags": ["Blog"],
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
                ],
                "responses": {
                    "200": {
                        "description": "Comments list",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": { "$ref": "#/components/schemas/BlogComment" }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/blog/{id}/moderate": {
            "post": {
                "summary": "Moderate blog post (admin)",
                "tags": ["Blog"],
                "security": [{ "bearerAuth": [] }],
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": { "$ref": "#/components/schemas/ModerateBlogPostDto" }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Moderation result",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "post": { "$ref": "#/components/schemas/BlogPost" }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}